import org.springframework.security.oauth2.client.OAuth2AuthorizeRequest;
import org.springframework.security.oauth2.client.OAuth2AuthorizedClient;
import org.springframework.security.oauth2.client.OAuth2AuthorizedClientManager;

// Inject the OAuth2AuthorizedClientManager into your class
private OAuth2AuthorizedClientManager authorizedClientManager;

// Obtain the access token
public String getAccessToken() {
    OAuth2AuthorizeRequest authorizeRequest =
            OAuth2AuthorizeRequest.withClientRegistrationId("your-client-registration-id")
                    .principal(yourAuthenticationPrincipal)
                    .scope("your-requested-scope")
                    .build();

    OAuth2AuthorizedClient authorizedClient =
            authorizedClientManager.authorize(authorizeRequest);

    return authorizedClient.getAccessToken().getTokenValue();
}
